<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Santa Monica â€” File SK/BR</title>
  <meta name="description" content="A classified time block in Santa Monica." />
  <meta name="theme-color" content="#f2e8dc" />
  <style>
    :root{
      --paper:#fbf6ee;
      --ink:#1f1b16;
      --muted:#6f6257;
      --rule:rgba(31,27,22,.18);
      --accent:#8b6b4f;
      --shadow: 0 18px 50px rgba(0,0,0,.12);
      --chip: rgba(255,255,255,.45);
      --danger: rgba(139,107,79,.16);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      color:var(--ink);
      background:
        radial-gradient(1200px 800px at 15% 20%, rgba(139,107,79,.18), transparent 55%),
        radial-gradient(900px 650px at 85% 75%, rgba(31,27,22,.10), transparent 55%),
        #f2e8dc;
      font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
    }
    .wrap{
      width:min(980px, 100%);
      border-radius:22px;
      overflow:hidden;
      border:1px solid rgba(31,27,22,.14);
      background:linear-gradient(180deg, rgba(255,255,255,.62), rgba(255,255,255,.25)), var(--paper);
      box-shadow: var(--shadow);
      position:relative;
    }
    .grain:before{
      content:"";
      position:absolute; inset:0;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.08'/%3E%3C/svg%3E");
      mix-blend-mode:multiply;
      pointer-events:none;
    }

    header{
      padding:30px 34px 18px;
      border-bottom:1px solid var(--rule);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
    }
    .filemeta .k{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      letter-spacing:.16em;
      text-transform:uppercase;
      font-size:12px;
      color:var(--muted);
    }
    .filemeta h1{
      margin:10px 0 0;
      font-size:34px;
      line-height:1.1;
      font-weight:780;
    }
    .chips{
      margin-top:12px;
      display:flex; flex-wrap:wrap; gap:10px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size:12px;
    }
    .chip{
      border:1px solid rgba(31,27,22,.20);
      background:var(--chip);
      padding:8px 10px;
      border-radius:999px;
      color:rgba(31,27,22,.88);
    }
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      font-size:12px;
      color:rgba(31,27,22,.75);
    }

    .right{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:10px;
    }
    .stamp{
      border:1px solid rgba(139,107,79,.55);
      color:rgba(139,107,79,1);
      display:inline-flex;
      padding:10px 12px;
      border-radius:12px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      background:rgba(255,255,255,.35);
    }
    .toggleRow{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size:12px;
      color:rgba(31,27,22,.88);
    }
    .btn{
      appearance:none;
      border:1px solid rgba(31,27,22,.25);
      background:rgba(31,27,22,.92);
      color:var(--paper);
      padding:10px 12px;
      border-radius:12px;
      font-size:13px;
      letter-spacing:.02em;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .btn.secondary{
      background:rgba(255,255,255,.45);
      color:rgba(31,27,22,.92);
    }
    .classChip{
      border:1px solid rgba(31,27,22,.20);
      background:rgba(255,255,255,.35);
      padding:8px 10px;
      border-radius:999px;
    }
    .classChip b{ letter-spacing:.12em; text-transform:uppercase; font-size:11px; }

    nav{
      padding:12px 16px;
      border-bottom:1px solid var(--rule);
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .tab{
      border:1px solid rgba(31,27,22,.18);
      background:rgba(255,255,255,.38);
      color:rgba(31,27,22,.90);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size:13px;
      letter-spacing:.02em;
    }
    .tab[aria-selected="true"]{
      background: rgba(31,27,22,.92);
      color: var(--paper);
      border-color: rgba(31,27,22,.35);
    }

    main{
      padding:22px 34px 28px;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:18px;
    }
    @media (max-width: 900px){ main{grid-template-columns:1fr} }

    .panel{
      border:1px solid rgba(31,27,22,.14);
      border-radius:18px;
      background:rgba(255,255,255,.35);
      padding:18px 18px 16px;
      min-height:240px;
    }
    .panel h2{
      margin:0 0 10px;
      font-size:14px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:var(--muted);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .content{
      color:var(--muted);
      font-size:16px;
      line-height:1.65;
      white-space:pre-line;
      margin:0;
    }
    .quote{
      margin-top:14px;
      border-left:3px solid rgba(139,107,79,.45);
      padding-left:12px;
      background: var(--danger);
      border-radius:12px;
      padding:12px 12px 12px 14px;
      color:rgba(31,27,22,.82);
      font-size:14px;
      line-height:1.6;
      white-space:pre-line;
    }

    .side h3{
      margin:0 0 8px;
      font-size:14px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:var(--muted);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .kv{
      display:flex; justify-content:space-between; gap:12px;
      padding:10px 0;
      border-bottom:1px solid rgba(31,27,22,.10);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size:13px;
      color:rgba(31,27,22,.88);
    }
    .kv span:first-child{color:rgba(111,98,87,.95)}
    .actions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:14px;
    }
    .fine{
      margin:12px 0 0;
      font-size:12px;
      color:rgba(111,98,87,.95);
      line-height:1.55;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .divider{height:1px;background:rgba(31,27,22,.10);margin:14px 0}
    .hide{ display:none; }
  </style>
</head>

<body>
  <div class="wrap grain">
    <header>
      <div class="filemeta">
        <div class="k">FILE Â· SANTA MONICA HOLD</div>
        <h1>Case: SK/BR â€” February 14</h1>

        <div class="chips">
          <div class="chip">Organizer: <span class="mono" id="org">Bharat Rai</span></div>
          <div class="chip">Attendee: <span class="mono" id="rec">Sejal Karki</span></div>
          <div class="chip">Start: <span class="mono" id="timeBadge">3:00 PM PST</span></div>
        </div>
      </div>

      <div class="right">
        <div class="stamp" id="stamp">PENDING REVIEW</div>

        <div class="toggleRow">
          <div class="classChip"><b id="classLabel">CLASSIFIED: OPERATIONAL</b></div>
          <button class="btn secondary" id="modeBtn" type="button" aria-pressed="false">Toggle</button>
        </div>
      </div>
    </header>

    <nav aria-label="Sections">
      <button class="tab" data-tab="summary" aria-selected="true">Summary</button>
      <button class="tab" data-tab="evidence" aria-selected="false">Evidence</button>
      <button class="tab" data-tab="terms" aria-selected="false">Terms</button>
      <button class="tab" data-tab="rsvp" aria-selected="false">RSVP</button>
    </nav>

    <main>
      <section class="panel">
        <h2 id="panelTitle">Summary</h2>

        <p class="content" id="panelBody"></p>

        <div class="quote hide" id="quoteBox"></div>
      </section>

      <aside class="panel side">
        <h3>Booking details</h3>

        <div class="kv"><span>Neighborhood</span><strong>Santa Monica</strong></div>
        <div class="kv"><span>Date</span><strong>Feb 14</strong></div>
        <div class="kv"><span>End time</span><strong>Flexible</strong></div>
        <div class="kv"><span>Dress code</span><strong>Dangerous</strong></div>

        <div class="divider"></div>

        <div class="actions">
          <a class="btn" id="approveBtn" href="#">Approve</a>
          <a class="btn secondary" id="editsBtn" href="#">Request edits</a>
        </div>

        <p class="fine" id="fineNote">
          Reply with RSVP yes/no, or a counteroffer. For the record, we may pretend itâ€™s operational.
        </p>
      </aside>
    </main>
  </div>

  <script>
    const recipientName = "Sejal Karki";
    const organizerName = "Bharat Rai";
    const dateText = "Feb 14";
    const timeText = "3:00 PM PST";
    const whatsappNumber = "";

    document.getElementById("org").textContent = organizerName;
    document.getElementById("rec").textContent = recipientName;
    document.getElementById("timeBadge").textContent = timeText;

    const stamp = document.getElementById("stamp");
    const classLabel = document.getElementById("classLabel");
    const modeBtn = document.getElementById("modeBtn");

    const approveBtn = document.getElementById("approveBtn");
    const editsBtn = document.getElementById("editsBtn");
    const fineNote = document.getElementById("fineNote");

    const panelTitle = document.getElementById("panelTitle");
    const panelBody = document.getElementById("panelBody");
    const quoteBox = document.getElementById("quoteBox");

    const tabs = Array.from(document.querySelectorAll(".tab"));

    const OP = {
      key: "operational",
      classText: "CLASSIFIED: OPERATIONAL",
      stamp: "PENDING REVIEW",
      approveLabel: "Approve hold",
      editsLabel: "Request edits",
      fine: "Reply with RSVP yes/no, or edits. For the record, we may pretend itâ€™s operational.",
      content: {
        summary:
`A scheduled time block in Santa Monica.
Organizer: ${organizerName}
Attendee: ${recipientName}
Scheduled: ${dateText} @ ${timeText}

Purpose: allocate uninterrupted time.
Notes: editable upon request.`,
        evidence:
`Evidence log:
â€¢ Date selected: ${dateText}
â€¢ Implications: noted (disputed).
â€¢ Motivation: allegedly â€œpurely operational.â€`,
        terms:
`Terms (standard):
1) RSVP yes/no
2) Any edits or requests
3) If delayed, rescheduling permitted (begrudgingly).`,
        rsvp:
`Choose a response path on the right.
This is a hold â€” not a confession.`
      },
      quote: ""
    };

    const IN = {
      key: "intentional",
      classText: "CLASSIFIED: INTENTIONAL",
      stamp: "AWAITING VERDICT",
      approveLabel: "Accept the date âœ…",
      editsLabel: "Counteroffer ðŸ˜ˆ",
      fine: "Counteroffers are welcomed. Denial will be treated as flirtation.",
      content: {
        summary:
`Dear Ms. Karki,

Yes â€” I picked February 14th with full awareness of its implications.
This isnâ€™t a scheduling error. Itâ€™s a decision.

My intentions are not subtle:
I want you.
I want your time.
I want a night that feels inevitable the moment it starts.

We can stamp it â€œoperationalâ€ for the paperwork.
In practice, itâ€™s a date â€” and Iâ€™m asking you seriously.

â€” ${organizerName}`,
        evidence:
`Evidence log (uncomfortably convincing):
â€¢ You noticed the date immediately.
â€¢ You requested â€œformal intentions.â€
â€¢ You used a signature and a postscript.
Conclusion: you are not indifferent.

Addendum:
If weâ€™re pretending itâ€™s operationalâ€¦
youâ€™re doing a terrible job.`,
        terms:
`Negotiation terms (binding):
1) Start time: ______ (earlier buys us more trouble)
2) Pace: slow enough to savor, fast enough to be reckless
3) Trouble level: tastefulâ€¦ until we forget to be tasteful
4) Non-negotiable: you show up, and I get you all to myself

Clause 5 (confidential):
If youâ€™re testing my nerve â€” noted.
I have nerve.`,
        rsvp:
`You asked for my intentions.

Theyâ€™re on record.
Now I want your answer.`
      },
      quote:
`â€œExpress your true intentions? â€¦ Are we acknowledging what this looks like,
or shall we agree to pretend itâ€™s purely operational?â€
â€” ${recipientName}`
    };

    let mode = OP;

    function setMode(next){
      mode = next;
      classLabel.textContent = mode.classText;
      stamp.textContent = mode.stamp;

      approveBtn.textContent = mode.approveLabel;
      editsBtn.textContent = mode.editsLabel;
      fineNote.textContent = mode.fine;

      localStorage.setItem("sm_mode", mode.key);
      renderTab(getActiveTab());
    }

    function getActiveTab(){
      const active = tabs.find(t => t.getAttribute("aria-selected") === "true");
      return active ? active.dataset.tab : "summary";
    }

    function renderTab(tabName){
      panelTitle.textContent = tabName[0].toUpperCase() + tabName.slice(1);
      panelBody.textContent = mode.content[tabName] || "";

      if(mode.quote && (tabName === "evidence" || tabName === "summary")){
        quoteBox.textContent = mode.quote;
        quoteBox.classList.remove("hide");
      } else {
        quoteBox.classList.add("hide");
      }
    }

    tabs.forEach(btn => {
      btn.addEventListener("click", () => {
        tabs.forEach(t => t.setAttribute("aria-selected", "false"));
        btn.setAttribute("aria-selected", "true");
        renderTab(btn.dataset.tab);
      });
    });

    function messageTemplate(type){
      const base =
`Santa Monica â€” Case SK/BR

Attendee: ${recipientName}
Organizer: ${organizerName}
Scheduled: ${dateText} @ ${timeText}`;

      if(mode.key === "intentional"){
        if(type === "approve"){
          return base + `

RSVP: Yes âœ…
Formally: I accept the implications.

P.S. I will not ask you to behave.
P.P.S. I also will not behave.`;
        }
        return base + `

RSVP: Counteroffer ðŸ˜ˆ

My terms:
1) Start time: ______
2) Place(s) I insist on: ______
3) Trouble level: ______

Addendum:
If youâ€™re trying to out-flirt an engineer, good luck.`;
      }

      if(type === "approve"){
        return base + `

RSVP: Approved âœ…
Notes: purely operational (for the record).`;
      }
      return base + `

RSVP: Requesting edits âœï¸
Edits requested:
1)
2)
3)`;
    }

    function openMessage(type){
      const body = encodeURIComponent(messageTemplate(type));
      const subject = encodeURIComponent(
        (mode.key === "intentional" ? "Formal Intentions â€” Verdict Requested" : "Santa Monica Hold â€” RSVP") +
        " â€” " + recipientName
      );

      if(whatsappNumber){
        const url = "https://wa.me/" + whatsappNumber + "?text=" + body;
        window.open(url, "_blank");
      } else {
        window.location.href = `mailto:?subject=${subject}&body=${body}`;
      }
    }

    approveBtn.addEventListener("click", (e)=>{ e.preventDefault(); openMessage("approve"); });
    editsBtn.addEventListener("click", (e)=>{ e.preventDefault(); openMessage("edits"); });

    modeBtn.addEventListener("click", ()=>{
      setMode(mode.key === "operational" ? IN : OP);
    });

    // Init (deep link + saved mode)
    const params = new URLSearchParams(location.search);
    const saved = localStorage.getItem("sm_mode");

    if(params.get("intent") === "truth") setMode(IN);
    else if(saved === "intentional") setMode(IN);
    else setMode(OP);

    renderTab("summary");
  </script>
</body>
</html>
